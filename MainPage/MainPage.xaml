<Page x:Class="Catan10.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Catan10"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="_page" d:DesignWidth="2560" d:DesignHeight="1440" IsTabStop="False"
    RequestedTheme="Dark" UseLayoutRounding="True" NavigationCacheMode="Required"
    RightTapped="OnRightTapped" mc:Ignorable="d">
    <Page.Resources>
        <Storyboard x:Name="_sbShowHideSettings">
            <DoubleAnimation x:Name="_daShowHideSettings" d:IsOptimized="True"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="_ctrlSettings" To="0" Duration="0:0:0.250" />
        </Storyboard>
        <Storyboard x:Name="_sbNumberOpacity">
            <DoubleAnimation x:Name="_daNumberOpacity" d:IsOptimized="True" AutoReverse="False"
                Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RollGrid"
                To="0" Duration="0:0:1.00" />
        </Storyboard>
        <Storyboard x:Name="_sbRotatePlayerAndRolls">
            <DoubleAnimation x:Name="_daRotatePlayers" d:IsOptimized="True"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
                Storyboard.TargetName="_gameTracker" To="0" Duration="0:0:1" />
            <DoubleAnimation x:Name="_daRotateRolls" d:IsOptimized="True"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
                Storyboard.TargetName="_rollHistoryChart" To="0" Duration="0:0:1" />
        </Storyboard>
        <Style x:Key="RollGridTextStyle" TargetType="TextBlock">
            <Setter Property="Margin" Value="2,-2" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="22" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="CharacterSpacing" Value="0" />
            <Setter Property="FontFamily" Value="Bookman Old Style" />
        </Style>
        <Style x:Key="ControlGridTextStyle" TargetType="TextBlock">
            <Setter Property="Margin" Value="2,-2" />
            <Setter Property="FontFamily" Value="Segoe UI" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="22" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="CharacterSpacing" Value="0" />
        </Style>
        <Style x:Key="NumberButtonKey" TargetType="Button">
            <Setter Property="Background" Value="Black" />
            <Setter Property="IsEnabled" Value="False" />
        </Style>
    </Page.Resources>
    <Viewbox Stretch="Uniform">
        <Grid x:Name="ContentRoot" Width="1920" Height="1080"
            local:CatanAttachedProperties.CurrentPlayerModel="{x:Bind CurrentPlayer, Mode=TwoWay}"
            PointerWheelChanged="OnScrollMouseWheel"
            Background="{StaticResource bmCherry}"
            CornerRadius="50"
            BorderBrush="{StaticResource bmMaple}"
            BorderThickness="6">
            <Button Visibility="Collapsed">
                <Button.Flyout>
                    <MenuFlyout x:Name="_menuBaron" Placement="Right" />
                </Button.Flyout>
            </Button>
            <Viewbox Grid.Row="0" Grid.RowSpan="5" Grid.Column="0" Grid.ColumnSpan="5"
                Width="75" Margin="20,0,0,20" HorizontalAlignment="Left"
                VerticalAlignment="Bottom">
                <Grid Visibility="{x:Bind SpyVisible, Mode=OneWay}">
                    <TextBlock Margin="5,14,5,-5" HorizontalAlignment="Center" FontSize="12" Text="{x:Bind TurnedSpyOn, Mode=OneWay}" />
                    <TextBlock HorizontalAlignment="Center" FontSize="54" Text="" FontFamily="Segoe MDL2 Assets" />
                </Grid>
            </Viewbox>
            <Button Margin="29,20,0,0" VerticalAlignment="Top" FontSize="22"
                Background="Transparent" Canvas.ZIndex="10">
                <Button.Content>
                    <TextBlock Text="&#xE700;" FontFamily="Segoe MDL2 Assets" FontSize="30" />
                </Button.Content>
                <Button.Flyout>
                    <MenuFlyout x:Name="_contextMenu" Placement="Bottom" Opened="OnMenuOpened" Closed="OnMenuClosed">
                        <MenuFlyoutSubItem Text="Game Type">
                            <ToggleMenuFlyoutItem Text="Regular Game" IsChecked="{x:Bind MainPageModel.Settings.IsLocalGame, Mode=TwoWay}" />
                            <ToggleMenuFlyoutItem Text="SignalR Game" IsChecked="{x:Bind MainPageModel.Settings.IsSignalRGame, Mode=TwoWay}" />
                            <ToggleMenuFlyoutItem Text="REST Game" IsChecked="{x:Bind MainPageModel.Settings.IsHomegrownGame, Mode=TwoWay}" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSubItem Text="Game">
                            <MenuFlyoutItem Text="New Game" Click="Menu_OnNewGame" />
                            <MenuFlyoutItem Text="End Game" Click="Menu_OnEndGame" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Network Game">
                            <ToggleMenuFlyoutItem Text="Auto Join Network Game" IsChecked="{x:Bind MainPageModel.Settings.AutoJoinGames, Mode=TwoWay}" />
                            <ToggleMenuFlyoutItem Text="Connect to WebSocket" IsChecked="{x:Bind MainPageModel.WebSocketConnected, Mode=TwoWay}" Click="OnWebSocketConnect" />
                            <MenuFlyoutItem Text="Start Default Network Game" Click="OnStartDefaultNetworkGame" />
                            <MenuFlyoutItem Text="New Network Game" Click="OnNewNetworkGame" />
                            <MenuFlyoutSeparator />
                            <MenuFlyoutItem Text="Delete All Games" Click="OnDeleteAllGames" />
                            <!--<MenuFlyoutItem Text="Join Game" Click="OnJoinGame" />-->
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Random Gold Tiles">
                            <ToggleMenuFlyoutItem Text="Random Gold Tile" IsChecked="{x:Bind Mode=TwoWay, Path=RandomGold}" />
                            <MenuFlyoutItem Text="Change Count" Click="OnChangeRandomGoldTileCount" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Development">
                            <MenuFlyoutItem Text="Show Catan Spy" Click="OnShowCatanSpy" />
                            <ToggleMenuFlyoutItem Text="Auto Respond Mode" IsChecked="{x:Bind MainPageModel.Settings.AutoRespond, Mode=TwoWay}" />
                            <MenuFlyoutItem Text="Save Settings" Click="OnSaveSettings" />
                            <MenuFlyoutSeparator />
                            <MenuFlyoutItem Text="Test 1" Click="OnTest1" />
                            <MenuFlyoutItem Text="Test 2" Click="OnTest2" />
                            <MenuFlyoutItem Text="Test 3" Click="OnTest3" />
                            <MenuFlyoutItem Text="Grant Resources" Click="OnGrantResources" />
                            <MenuFlyoutItem Text="Grant Entitlements" Click="OnGrantEntitlements" />
                            <MenuFlyoutSeparator />
                            <MenuFlyoutItem Text="Test Game (Regular)" Click="OnTestRegularGame" />
                            <MenuFlyoutItem Text="Test Game (Expansion)" Click="OnTestExpansionGame" />
                            <MenuFlyoutSeparator />
                            <MenuFlyoutItem Text="Pick Settlements and Road" Click="PickSettlementsAndRoads" />
                            <MenuFlyoutSeparator />
                            <ToggleMenuFlyoutItem Text="Show Tile Index" Click="ToggleShowTile" IsChecked="False" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Baron">
                            <MenuFlyoutItem Text="Optimal" Click="OnPickOptimalBaron" />
                            <MenuFlyoutItem Text="Random" Click="OnPickRandomBaron" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Players">
                            <MenuFlyoutItem Text="Set Default User" Click="OnSetUser" />
                            <MenuFlyoutItem Text="Manage Players" Click="OnManagePlayers" />
                            <MenuFlyoutItem Text="Reset To Default" Click="OnSetDefaultState" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem Text="Options">
                            <ToggleMenuFlyoutItem Text="Hide Players On Next" IsChecked="False" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutItem Text="Randomize Board" Click="OnAssignNumbers" />
                        <MenuFlyoutItem Text="Settings" Click="OnViewSettings" />
                        <MenuFlyoutItem Text="Show Saved Games" Click="Menu_ShowSavedGames" />
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem x:Name="Menu_Games" Text="Games" />
                        <MenuFlyoutSeparator />
                        <MenuFlyoutSubItem x:Name="Menu_Colors" Text="Color">
                            <MenuFlyoutSubItem x:Name="Menu_Primary_Color" Text="Primary" />
                            <MenuFlyoutSubItem x:Name="Menu_Secondary_Color" Text="Secondary" />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSeparator />
                        <MenuFlyoutItem Text="Cancel" Click="OnCancelClicked" />
                    </MenuFlyout>
                </Button.Flyout>
            </Button>
            <local:GameContainerCtrl x:Name="_gameView" DoubleTapped="GameViewControlDoubleTapped" Canvas.ZIndex="-1"
                RenderTransformOrigin="0.5,0.5" IsEnabled="True"
                PointerPressed="GameViewControlPointerPressed">
                <local:GameContainerCtrl.RenderTransform>
                    <CompositeTransform x:Name="_transformGameView"
                        TranslateX="{x:Bind MainPageModel.Settings.GameViewPosition.TranslateX, Mode=TwoWay}"
                        TranslateY="{x:Bind MainPageModel.Settings.GameViewPosition.TranslateY, Mode=TwoWay}"
                        ScaleX="{x:Bind MainPageModel.Settings.Zoom, Mode=OneWay}"
                        ScaleY="{x:Bind MainPageModel.Settings.Zoom, Mode=OneWay}" />
                </local:GameContainerCtrl.RenderTransform>
            </local:GameContainerCtrl>
            <local:DragableGridCtrl x:Name="Draggable_PrivateData" Width="360" HorizontalAlignment="Center"
                VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged"
                Player="{x:Bind TheHuman, Mode=OneWay}"
                Background="{StaticResource DevCardType.Knight}"
                Caption="Private Data" BorderThickness="2"
                BorderBrush="{StaticResource bmMaple}"
                CornerRadius="10">
                <local:DragableGridCtrl.Child>
                    <local:PrivateDataCtrl Player="{x:Bind TheHuman, Mode=OneWay}" StolenResource="{x:Bind TheHuman.GameData.Resources.StolenResource, Mode=OneWay}" />
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>
            <local:PlayersTrackerCtrl x:Name="Ctrl_PlayerResourceCountCtrl" Margin="10" HorizontalAlignment="Right"
                Canvas.ZIndex="5"
                GameResources="{x:Bind MainPageModel.GameResources, Mode=OneWay}"
                PlayingPlayers="{x:Bind MainPageModel.PlayingPlayers, Mode=OneWay}"
                MainPageModel="{x:Bind MainPageModel, Mode=OneWay}"
                GameState="{x:Bind MainPageModel.Log.GameState, Mode=OneWay}" />
            <local:DragableGridCtrl x:Name="ControlGrid" Width="172" HorizontalAlignment="Center"
                VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged"
                Background="{StaticResource bmMaple}"
                Foreground="Black" Visibility="Visible" CornerRadius="10"
                Player="{x:Bind CurrentPlayer, Mode=OneWay}"
                Caption="{x:Bind CurrentPlayer.PlayerName, Mode=OneWay}"
                BorderBrush="{StaticResource WhiteBrush}">
                <local:DragableGridCtrl.Child>
                    <StackPanel Width="350" Height="425" Margin="5" HorizontalAlignment="Center"
                        Orientation="Vertical"
                        Background="{x:Bind CurrentPlayer.BackgroundBrush, Mode=OneWay}"
                        CornerRadius="10">
                        <StackPanel>
                            <Button x:Name="_btnNextStep" Margin="0,10,0,0" HorizontalAlignment="Center"
                                Content="&#xE101;"
                                Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}"
                                Background="{x:Bind CurrentPlayer.BackgroundBrush, Mode=OneWay}"
                                Style="{StaticResource GameControllerStyle}"
                                Click="OnNextStep"
                                IsEnabled="{x:Bind MainPageModel.EnableNextButton, Mode=OneWay}" />
                            <TextBlock Margin="5,0,5,0" Style="{StaticResource ControlGridTextStyle}" Text="{x:Bind MainPageModel.StateMessage, FallbackValue=Next, TargetNullValue=Next, Mode=OneWay}" Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}" />
                        </StackPanel>
                        <StackPanel HorizontalAlignment="Center" Style="{StaticResource GameControllerStackPanelCommand}">
                            <StackPanel Orientation="Vertical">
                                <Button x:Name="_btnUndo" Content="&#xE10E;"
                                    Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}"
                                    Background="{x:Bind CurrentPlayer.BackgroundBrush, Mode=OneWay}"
                                    Style="{StaticResource GameControllerStyle}"
                                    Click="OnUndo"
                                    IsEnabled="{x:Bind MainPageModel.EnableUndo, Mode=OneWay}" />
                                <TextBlock Text="Undo" Style="{StaticResource ControlGridTextStyle}" Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}" />
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Center" Orientation="Vertical">
                                <Button Content="&#xE10D;"
                                    Style="{StaticResource GameControllerStyle}"
                                    Click="OnRedo"
                                    IsEnabled="{x:Bind MainPageModel.EnableRedo, Mode=OneWay}"
                                    Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}"
                                    Background="{x:Bind CurrentPlayer.BackgroundBrush, Mode=OneWay}" />
                                <TextBlock Text="Redo" Style="{StaticResource ControlGridTextStyle}" Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}" />
                            </StackPanel>
                        </StackPanel>
                        <StackPanel HorizontalAlignment="Center" Style="{StaticResource GameControllerStackPanelCommand}">
                            <StackPanel Margin="0,10,0,10" HorizontalAlignment="Stretch">
                                <Button Width="80" Height="80" Margin="5,0,0,0" HorizontalAlignment="Center">
                                    <Button.Content>
                                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center"
                                                VerticalAlignment="Center" Text="⚃" FontSize="50" FontFamily="Segoe UI Symbol"
                                                Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}"
                                                Style="{StaticResource ControlGridTextStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}"
                                                Text="⚂" FontSize="50" FontFamily="Segoe UI Symbol"
                                                Style="{StaticResource ControlGridTextStyle}" />
                                        </Grid>
                                    </Button.Content>
                                </Button>
                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                    <TextBlock Text="Total Rolls: " Style="{StaticResource ControlGridTextStyle}" Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}" />
                                    <TextBlock Style="{StaticResource ControlGridTextStyle}" Text="{x:Bind FallbackValue=20, Mode=OneWay, Path=TotalRolls}" Foreground="{x:Bind CurrentPlayer.ForegroundBrush, Mode=OneWay}" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                        <Grid Height="40" Margin="0,5,0,0" HorizontalAlignment="Center" Background="Black">
                            <local:StopWatchCtrl x:Name="_stopWatchForTurn" Grid.Row="1" Grid.Column="1" Margin="5"
                                HorizontalAlignment="Left" VerticalAlignment="Bottom" ColorCodeTimer="True" />
                        </Grid>
                    </StackPanel>
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>
            <local:DragableGridCtrl x:Name="Grid_RollStats" Width="175" HorizontalAlignment="Center"
                VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged"
                Background="{StaticResource bmMaple}"
                CornerRadius="10"
                Visibility="{x:Bind MainPageModel.ShowRolls, Mode=OneWay}"
                Player="{x:Bind CurrentPlayer, Mode=OneWay}"
                Caption="{x:Bind CurrentPlayer.PlayerName, Mode=OneWay}"
                BorderBrush="{StaticResource WhiteBrush}">
                <local:DragableGridCtrl.Child>
                    <Viewbox Grid.Row="1" Height="400" Margin="0" HorizontalAlignment="Stretch">
                        <StackPanel>
                            <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="2" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.TwoPercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="3" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.ThreePercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="4" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.FourPercent}" />
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="5" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.FivePercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="6" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.SixPercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="7"
                                            Visibility="Visible" Theme="Dark" HideSeven="False" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.SevenPercent}" />
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="8" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.EightPercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="9" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.NinePercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="10" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.TenPercent}" />
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0,5" Style="{StaticResource GameControllerStackPanelCommand}">
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="11" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.ElevenPercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                        <local:CatanNumber Width="75" Height="75" Margin="2,-2" Number="12" />
                                    </Button>
                                    <TextBlock Style="{StaticResource RollGridTextStyle}" Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=MainPageModel.Log.RollLog.TwelvePercent}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <ToggleButton x:Name="btn_BaronToggle" Margin="0,-13,0,0" Background="Transparent"
                                        IsChecked="{x:Bind CanMoveBaronBeforeRoll, Mode=TwoWay}"
                                        IsEnabled="{x:Bind MainPageModel.Log.GameState, Mode=OneWay, Converter={StaticResource ResourceKey=GameStateToBooleanConverter}, FallbackValue=true, ConverterParameter=WaitingForRoll}">
                                        <local:BaronCtrl Width="85" Height="71" />
                                    </ToggleButton>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Viewbox>
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>

            <Grid Name="_savedGameGrid" Grid.Row="1" Width="383" Height="280"
                Margin="0" HorizontalAlignment="Center" VerticalAlignment="Center"
                x:Load="False" Canvas.ZIndex="10" PointerPressed="OnPointerPressed"
                Visibility="Collapsed"
                Background="{StaticResource bmCherry}"
                BorderBrush="{StaticResource bmMaple}"
                BorderThickness="4" CornerRadius="4">
                <Grid.RenderTransform>
                    <CompositeTransform />
                </Grid.RenderTransform>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="350*" />
                    <ColumnDefinition Width="0" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="33*" />
                </Grid.RowDefinitions>
                <Viewbox Grid.RowSpan="1" Grid.ColumnSpan="2">
                    <TextBlock Grid.RowSpan="2" Grid.ColumnSpan="2" Text="Saved Games" CharacterSpacing="0"
                        Foreground="White" />
                </Viewbox>
                <Viewbox HorizontalAlignment="Right" VerticalAlignment="Stretch">
                    <Button Background="Transparent" Click="OnCloseSavedGames" Content="&#xE947;" FontFamily="Segoe MDL2 Assets" />
                </Viewbox>
                <!--<ListBox x:Name="_lbGames" Grid.Row="1" Grid.RowSpan="1" Grid.ColumnSpan="2"
                Margin="4"
                ItemsSource="{x:Bind SavedGames}"
                Background="{StaticResource bmMaple}"
                SelectionChanged="SavedGame_SelectionChanged" Foreground="Black">
                <ListBox.ItemTemplate>
                    <DataTemplate x:DataType="local:Log">
                        <TextBlock Text="{x:Bind DisplayName}" Foreground="White" FontSize="20" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>-->
            </Grid>
            <local:DragableGridCtrl x:Name="Grid_BoardMeasurement" Grid.Row="1" Grid.RowSpan="10" Width="360"
                HorizontalAlignment="Center" VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged" Caption="Board Measurements"
                Visibility="{x:Bind MainPageModel.ShowBoardMeasurements, Mode=OneWay}"
                BorderBrush="{StaticResource bmMaple}"
                Background="{StaticResource DevCardType.Knight}"
                Player="{x:Bind TheHuman, Mode=OneWay}"
                CornerRadius="10" BorderThickness="4">
                <local:DragableGridCtrl.Child>
                    <local:BoardMeasurementCtrl Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        PipCount="{Binding Path=PipCount, Mode=OneWay}"
                        FiveStarPositions="{x:Bind Path=MainPageModel.FiveStarPositions, Mode=OneWay}"
                        FourStarPositions="{x:Bind Path=MainPageModel.FourStarPositions, Mode=OneWay}"
                        ThreeStarPositions="{x:Bind Path=MainPageModel.ThreeStarPositions, Mode=OneWay}"
                        TwoStarPositions="{x:Bind Path=MainPageModel.TwoStarPositions, Mode=OneWay}"
                        CornerRadius="10">
                        <local:BoardMeasurementCtrl.Transitions>
                            <TransitionCollection>
                                <EntranceThemeTransition />
                            </TransitionCollection>
                        </local:BoardMeasurementCtrl.Transitions>
                    </local:BoardMeasurementCtrl>
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>
            <!--  Visibility="{x:Bind MainPageModel.ShowRolls, Mode=OneWay}"  -->
            <local:DragableGridCtrl x:Name="SynchronizedRolls" Width="360" HorizontalAlignment="Center"
                VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged"
                Background="{StaticResource bmMaple}"
                Foreground="Black"
                Visibility="{x:Bind MainPageModel.ShowRolls, Mode=OneWay}"
                CornerRadius="10"
                Player="{x:Bind TheHuman, Mode=OneWay}"
                Caption="{x:Bind TheHuman.PlayerName, Mode=OneWay}"
                BorderBrush="{StaticResource WhiteBrush}">
                <local:DragableGridCtrl.Child>
                    <local:PlayerRollCtrl x:Name="_rollControl" Grid.Row="1" OnRolled="OnRolled" OnShowAllRolls="OnShowAllRolls" />
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>
            <local:DragableGridCtrl x:Name="PlayerTradeGrid" Width="500" HorizontalAlignment="Center"
                VerticalAlignment="Center" Canvas.ZIndex="10"
                PointerPressed="Draggable_PointerPressed"
                OnGridPositionChanged="OnGridPositionChanged"
                Background="{StaticResource bmMaple}"
                Foreground="Black"
                Visibility="{x:Bind MainPageModel.ShowRolls, Mode=OneWay}"
                CornerRadius="10"
                Player="{x:Bind TheHuman, Mode=OneWay}"
                Caption="Resource Trades"
                BorderBrush="{StaticResource WhiteBrush}">
                <local:DragableGridCtrl.Child>
                    <local:TradeCtrl x:Name="MyPlayerTraderCtrl" TheHuman="{x:Bind TheHuman, Mode=OneWay}" />
                </local:DragableGridCtrl.Child>
            </local:DragableGridCtrl>
            <ProgressRing Name="_progress" Grid.Row="0" Width="100" Height="100"
                HorizontalAlignment="Center" VerticalAlignment="Center" Canvas.ZIndex="20"
                IsActive="True" Visibility="Visible" />
        </Grid>
    </Viewbox>
</Page>
