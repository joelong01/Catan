<Page
    x:Class="Catan10.MainPage"
    x:Name="_page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Catan10"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"    
    IsTabStop="False"
    mc:Ignorable="d"
    RequestedTheme="Dark"
    UseLayoutRounding="True"
    d:DesignWidth="2560"
    d:DesignHeight="1440"
    NavigationCacheMode ="Required"
    RightTapped="OnRightTapped"
   >

    <Page.Resources>
        <Storyboard x:Name="_sbShowHideSettings">
            <DoubleAnimation x:Name="_daShowHideSettings" Duration="0:0:0.250" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="_ctrlSettings" d:IsOptimized="True"/>
        </Storyboard>
        <Storyboard x:Name="_sbShowHideNumbers">
            <DoubleAnimation x:Name="_daShowHideNumbers" Duration="0:0:0.500" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="RollGrid" d:IsOptimized="True"/>
        </Storyboard>

        <Storyboard x:Name="_sbNumberOpacity">
            <DoubleAnimation x:Name="_daNumberOpacity" Duration="0:0:1.00" To="0" Storyboard.TargetProperty="(UIElement.Opacity)"  AutoReverse="False" Storyboard.TargetName="RollGrid" d:IsOptimized="True"/>
        </Storyboard>


        <Storyboard x:Name="_sbRotatePlayerAndRolls">
            <DoubleAnimation x:Name="_daRotatePlayers" Duration="0:0:1" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="_gameTracker" d:IsOptimized="True"/>
            <DoubleAnimation x:Name="_daRotateRolls" Duration="0:0:1" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="_rollHistoryChart" d:IsOptimized="True"/>
        </Storyboard>

        <Style TargetType="Button" x:Key="NumberButtonKey">
            <Setter Property="Background" Value="Black" />
        </Style>




    </Page.Resources>





    <Grid x:Name="ContentRoot">

        <Rectangle Fill="{StaticResource bmCherry}" RadiusX="344" RadiusY="344"  Stroke="{StaticResource bmMaple}" StrokeThickness="4" Visibility="Visible"/>

        <local:ResourceCountCtrl x:Name="_rccPlayer1" HorizontalAlignment="Left" VerticalAlignment="Bottom"  />
        <local:ResourceCountCtrl x:Name="_rccPlayer2" HorizontalAlignment="Left" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5"  >
            <local:ResourceCountCtrl.RenderTransform>
                <CompositeTransform Rotation="180"/>
            </local:ResourceCountCtrl.RenderTransform>
        </local:ResourceCountCtrl>
        <local:ResourceCountCtrl x:Name="_rccPlayer3" HorizontalAlignment="Right" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5"  >
            <local:ResourceCountCtrl.RenderTransform>
                <CompositeTransform Rotation="180"/>
            </local:ResourceCountCtrl.RenderTransform>
        </local:ResourceCountCtrl>
        <local:ResourceCountCtrl x:Name="_rccPlayer4" HorizontalAlignment="Right" VerticalAlignment="Bottom"  />
        <local:ResourceCountCtrl x:Name="_rccPlayer5" HorizontalAlignment="Left" VerticalAlignment="Center" RenderTransformOrigin="0,1"  >
            <local:ResourceCountCtrl.RenderTransform>
                <CompositeTransform Rotation="90" TranslateY="-210"/>
            </local:ResourceCountCtrl.RenderTransform>
        </local:ResourceCountCtrl>
        <local:ResourceCountCtrl x:Name="_rccPlayer6" HorizontalAlignment="Right" VerticalAlignment="Center" RenderTransformOrigin="1 1"  >
            <local:ResourceCountCtrl.RenderTransform>
                <CompositeTransform Rotation="-90" TranslateY="-210"/>
            </local:ResourceCountCtrl.RenderTransform>
        </local:ResourceCountCtrl>

        <Button Visibility="Collapsed">
            <Button.Flyout>
                <MenuFlyout x:Name="_menuBaron"  Placement="Right" >
                </MenuFlyout>
            </Button.Flyout>
        </Button>




        <Viewbox  HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Margin="0,5,0,5">
            <local:GameContainerCtrl x:Name="_gameView"  DoubleTapped="GameViewControlDoubleTapped"
                    Canvas.ZIndex="-1" RenderTransformOrigin="0.5,0.5"    IsEnabled="True" PointerPressed="GameViewControlPointerPressed"      >
                <local:GameContainerCtrl.RenderTransform>
                    <CompositeTransform x:Name="_transformGameView" TranslateX="0" Rotation="0"/>
                </local:GameContainerCtrl.RenderTransform>
            </local:GameContainerCtrl>
        </Viewbox>



        <Grid x:Name="ControlGrid" PointerPressed="OnPointerPressed" Width="250" Height="500" HorizontalAlignment="Left" Margin="0" VerticalAlignment="Center" >
            <Grid.RenderTransform>
                <CompositeTransform/>
            </Grid.RenderTransform>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="10*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Rectangle Grid.Row="0" Fill="{x:Bind Converter={StaticResource ResourceKey=ColorToBrushConverter}, FallbackValue=Green, Mode=OneWay, Path=ActivePlayerBackground}" Stroke="White" StrokeThickness="1"   />
            <Viewbox HorizontalAlignment="Right" VerticalAlignment="Stretch" >
                <Button Background="Transparent" Click="OnGrowOrShrinkControls" Content="&#xE740;" FontFamily="Segoe MDL2 Assets" />
            </Viewbox>
            <Viewbox HorizontalAlignment="Center" >

                <TextBlock Text="{x:Bind FallbackValue=Nobody (yet), Mode=OneWay, Path=ActivePlayerName}" CharacterSpacing="0" Foreground="{x:Bind Converter={StaticResource ResourceKey=ColorToBrushConverter}, FallbackValue=White, Mode=OneWay, Path=ActivePlayerForeground}"/>

            </Viewbox>

            <Border Grid.Row="1" BorderBrush="White" BorderThickness="1">

                <StackPanel Orientation="Vertical" Background="Black" Margin="0, 0, 0,0">
                    <Grid HorizontalAlignment="Center" >
                        <Button x:Name="_btnNextStep" Content="&#xE101;" Style="{StaticResource GameControllerStyle}" Click="OnNextStep" HorizontalAlignment="Center" Margin="33,0,32,29"/>
                        <TextBlock Text="{x:Bind StateDescription, FallbackValue=Next When Done blah blah, Mode=OneWay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="22" Margin="0,76,0,-1" />
                    </Grid>
                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                        <StackPanel Orientation="Vertical" >
                            <Button x:Name="_btnUndo" Content="&#xE10E;" Style="{StaticResource GameControllerStyle}" Click="OnUndo"/>
                            <TextBlock Text="Undo" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel x:Name="stackPanel" Orientation="Vertical" >
                            <Button x:Name="_btnNewGame" Content="&#xE109;" Style="{StaticResource GameControllerStyle}" Click="OnNewGame" />
                            <TextBlock Text="New Game" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>

                    </StackPanel>
                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                        <StackPanel  >
                            <Button x:Name="_btnWinner" Content="&#xE19F;" Style="{StaticResource GameControllerStyle}" Click="OnWinner"/>
                            <TextBlock Text="Winner" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel  >
                            <Button x:Name="_showMenu" Content="&#xE1EF;" Style="{StaticResource GameControllerStyle}" Click="OnShowMenu">
                                <Button.Flyout>
                                    <MenuFlyout x:Name="_contextMenu" Placement="Bottom" Opened="OnMenuOpened" Closed="OnMenuClosed" >
                                        <MenuFlyoutItem x:Name="Menu_Test" Text ="Test" Click="OnTest" />
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutItem Text="Manage Players" Click="OnManagePlayers" />
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutSubItem Text="Options" >
                                            <ToggleMenuFlyoutItem Text="Hide Players On Next" IsChecked="False" x:Name="_menuHidePlayersOnNext"/>
                                            <MenuFlyoutItem Text="Add Default Users" Click="OnAddDefaultUsers" />
                                        </MenuFlyoutSubItem>
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutItem Text="Cards Lost..." Click="OnLostCards" />

                                        <MenuFlyoutSeparator/>

                                        <MenuFlyoutItem x:Name="Menu_Undo" Text="Undo" Click="OnUndoClicked"  />
                                        <MenuFlyoutItem x:Name="Menu_AssignNumbers" Text="Assign Tile Numbers" Click="OnAssignNumbers"  />
                                        <MenuFlyoutItem x:Name="Menu_Winner" Text="Winner" Click="OnWinnerClicked" />
                                        <MenuFlyoutItem x:Name="Menu_NewGame" Text="New Game" Click="Menu_OnNewGame" />
                                        <MenuFlyoutItem x:Name="Menu_Open" Text="Show Saved Games" Click="Menu_ShowSavedGames" />
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutSubItem x:Name="Menu_Games" Text="Games" />
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutSubItem x:Name="Menu_Colors" Text ="Color" />
                                        <MenuFlyoutSeparator/>
                                        <MenuFlyoutItem Text="Cancel" Click="OnCancelClicked" />
                                    </MenuFlyout>
                                </Button.Flyout>
                            </Button>
                            <TextBlock Text="Menu" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>

                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <StackPanel  Orientation="Vertical" >
                            <Button x:Name="_btnShowSettings" Content="&#xE115;" Style="{StaticResource GameControllerStyle}" Click="OnViewSettings" FontSize="54" />
                            <TextBlock Text="Settings" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel >
                            <Button Width="80" Height="77" Margin="20,0,0,0" Tapped="OnShowRolls">
                                <Grid Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="⚃" FontFamily="Segoe UI Symbol" FontSize="44" CharacterSpacing="0" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="⚂" FontFamily="Segoe UI Symbol" FontSize="44" CharacterSpacing="0" HorizontalAlignment="Center" VerticalAlignment="Center" />

                                </Grid>

                                <!--Name="_btnViewSettings" Content="&#x2685;" Style="{StaticResource GameControllerStyle}" Click="OnViewSettings" FontSize="54"/>-->
                            </Button>
                            <TextBlock Text="Rolls" Grid.Row="3" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="20,0,0,0"/>

                        </StackPanel>
                    </StackPanel>

                    <Grid Height="40" Background="Black" HorizontalAlignment="Center" Margin="0,5,0,0">
                        <local:StopWatchCtrl x:Name="_stopWatchForTurn" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="5" ColorCodeTimer="True"/>
                    </Grid>
                </StackPanel>
            </Border>


        </Grid>

        <Grid Name="RollGrid"  Width="300" Height="450" BorderBrush="White" PointerPressed="OnPointerPressed" HorizontalAlignment="Right" VerticalAlignment="Center"
                  BorderThickness="1" IsHitTestVisible="True" Margin="0" >
            <Grid.RenderTransform>
                <CompositeTransform TranslateX="-0" ScaleX="1" ScaleY="1" />
            </Grid.RenderTransform>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="10*"/>
            </Grid.RowDefinitions>

            <Rectangle Grid.Row="0" Fill="{x:Bind Path=ActivePlayerBackground, Mode=OneWay, FallbackValue=Green, Converter={StaticResource ResourceKey=ColorToBrushConverter}}" Stroke="White" StrokeThickness="1"   />
            <Viewbox HorizontalAlignment="Center" >
                <TextBlock Text="Catan" CharacterSpacing="0" Foreground="{x:Bind Path=ActivePlayerForeground, Mode=OneWay, FallbackValue=White, Converter={StaticResource ResourceKey=ColorToBrushConverter}}"/>
            </Viewbox>
            <Viewbox Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Stretch" >
                <Button Click="OnGrowOrShrinkRolls" Content="&#xE740;" FontFamily="Segoe MDL2 Assets" />
            </Viewbox>
            <Rectangle Stroke="White" Grid.Row="1" StrokeThickness="1" Fill="Black"/>
            <Viewbox HorizontalAlignment="Stretch" Margin="0" Grid.Row="1" Height="400">

                <StackPanel >
                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}" >
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="2" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=TwoPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,2"/>

                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="3" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=ThreePercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>

                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="4" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=FourPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                    </StackPanel>

                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="5" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=FivePercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="6" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=SixPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="7" Width="75" Height="75" Visibility="Visible" Theme="Dark" HideSeven="False" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=SevenPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>

                    </StackPanel>
                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}">

                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="8" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=EightPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2" />
                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}" >
                                <local:CatanNumber Number="9" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=NinePercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2" />
                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="10" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=TenPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2" />
                        </StackPanel>

                    </StackPanel>
                    <StackPanel Style="{StaticResource GameControllerStackPanelCommand}" Margin="0,5">
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="11" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=ElevenPercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2" />
                        </StackPanel>
                        <StackPanel Orientation="Vertical" >
                            <Button Tapped="OnNumberTapped" Style="{StaticResource NumberButtonKey}">
                                <local:CatanNumber Number="12" Width="75" Height="75" Margin="2,-2" />
                            </Button>
                            <TextBlock Text="{x:Bind FallbackValue=0 (0%), Mode=OneWay, Path=TwelvePercent}" FontSize="12" CharacterSpacing="0" HorizontalAlignment="Center" Margin="2,-2"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Rolls: " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="22" CharacterSpacing="0"/>
                            <TextBlock Text="{x:Bind FallbackValue=0, Mode=OneWay, Path=TotalRolls}" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="22" CharacterSpacing="0"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>


            </Viewbox>


        </Grid>

        <local:GameSummaryCtrl x:Name="_GameSummary" Width="650" Height="100" HorizontalAlignment="Left" VerticalAlignment="Top" PointerPressed="OnPointerPressed" Margin="0,185,0,0">
            <local:GameSummaryCtrl.RenderTransform>
                <CompositeTransform SkewX=".9" ScaleY=".9"/>
            </local:GameSummaryCtrl.RenderTransform>
        </local:GameSummaryCtrl>


        <local:ScoreViewCtrl x:Name="ScoreGrid" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="310" Height="265" Margin="0"  />
        <local:ScoreViewCtrl x:Name="ScoreGrid2" HorizontalAlignment="Right" VerticalAlignment="Top" Width="310" Height="265"  Margin="0" RenderTransformOrigin=".5 .5">
            <local:ScoreViewCtrl.RenderTransform>
                <CompositeTransform Rotation="180" />
            </local:ScoreViewCtrl.RenderTransform>
        </local:ScoreViewCtrl>

        <Grid Name="_savedGameGrid" Width="383" Height="280" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0" Grid.Row="1" PointerPressed="OnPointerPressed" Visibility="Collapsed" Background="{StaticResource bmCherry}"
              BorderBrush="{StaticResource bmMaple}" BorderThickness="4" CornerRadius="4">
            <Grid.RenderTransform>
                <CompositeTransform/>
            </Grid.RenderTransform>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="350*"/>
                <ColumnDefinition Width="0"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="33*"/>
            </Grid.RowDefinitions>

            <Viewbox Grid.RowSpan="1" Grid.ColumnSpan="2" >
                <TextBlock Text="Saved Games" CharacterSpacing="0" Foreground="White" Grid.RowSpan="2" Grid.ColumnSpan="2"  />
            </Viewbox>

            <Viewbox HorizontalAlignment="Right" VerticalAlignment="Stretch" >
                <Button Background="Transparent" Click="OnCloseSavedGames" Content="&#xE947;" FontFamily="Segoe MDL2 Assets" />
            </Viewbox>

            <ListBox x:Name="_lbGames" Grid.Row="1" ItemsSource="{x:Bind SavedGames}" SelectionChanged="SavedGame_SelectionChanged" Grid.RowSpan="1" Grid.ColumnSpan="2" Margin="4" Foreground="Black" >
                <ListBox.Background>
                    <ImageBrush Stretch="Fill" ImageSource="ms-appx:///Assets/maple.jpg"/>
                </ListBox.Background>
                <ListBox.ItemTemplate>
                    <DataTemplate x:DataType="local:Log">
                        <TextBlock Text="{x:Bind DisplayName}" Foreground="White" FontSize="20" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>

        <ProgressRing Name="_progress" Grid.Row="0"  Canvas.ZIndex="9999" HorizontalAlignment="Left" VerticalAlignment="Bottom" IsActive="True" Width="100" Height="100" Visibility="Visible"/>

    </Grid>

</Page>
